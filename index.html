<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lady Legalz ContractGen 2026 - NEO INTELLIGENCE</title>
    <link href="https://fonts.googleapis.com/css2?family=Space+Mono:wght@400;700&family=Plus+Jakarta+Sans:wght@300;400;600;800&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://unpkg.com/docx@8.5.0/build/index.js"></script>
    <script src="https://unpkg.com/file-saver@2.0.5/dist/FileSaver.min.js"></script>
    <style>
        :root {
            --accent: #00f2ff;
            --secondary: #7000ff;
            --glass: rgba(255, 255, 255, 0.05);
            --border: rgba(255, 255, 255, 0.12);
            --bg: #05070a;
        }

        * { box-sizing: border-box; scrollbar-width: none; }
        *::-webkit-scrollbar { display: none; }

        body, html { 
            margin: 0; padding: 0; height: 100%; 
            background: var(--bg); color: #e2e8f0; 
            font-family: 'Plus Jakarta Sans', sans-serif; 
            overflow: hidden; 
        }

        #particlesCanvas { position: fixed; top: 0; left: 0; z-index: 0; opacity: 0.3; pointer-events: none; }

        .app-grid {
            display: grid;
            grid-template-columns: 400px 1fr;
            height: 100vh;
            position: relative;
            z-index: 1;
        }

        /* SIDEBAR */
        .sidebar {
            background: rgba(10, 15, 25, 0.9);
            border-right: 1px solid var(--border);
            padding: 25px;
            overflow-y: auto;
            backdrop-filter: blur(40px);
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .logo-header {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px;
            background: var(--glass);
            border: 1px solid var(--border);
            border-radius: 16px;
            margin-bottom: 10px;
        }

        .logo-img {
            width: 50px;
            height: 50px;
            border-radius: 8px;
            object-fit: cover;
            border: 1px solid var(--accent);
            background: #111; /* Fallback color if image is missing */
        }

        .section-label { font-family: 'Space Mono'; font-size: 0.7rem; color: var(--accent); letter-spacing: 2px; text-transform: uppercase; margin-bottom: 10px; }
        
        .tree-item {
            padding: 14px; margin-bottom: 10px;
            background: var(--glass);
            border-radius: 12px;
            cursor: pointer;
            font-size: 0.85rem;
            border: 1px solid transparent;
            transition: 0.3s;
        }
        .tree-item:hover { border-color: var(--accent); transform: translateX(5px); }
        .tree-item.active { background: var(--secondary); border-color: var(--accent); }

        .var-input, .state-select {
            width: 100%;
            background: rgba(255,255,255,0.04);
            border: 1px solid var(--border);
            padding: 12px;
            border-radius: 10px;
            color: #fff;
            margin-bottom: 12px;
            font-size: 0.85rem;
            outline: none;
        }

        /* VAULT TOGGLES */
        .vault-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px;
            background: rgba(255,255,255,0.02);
            border-radius: 10px;
            margin-bottom: 8px;
            font-size: 0.8rem;
        }
        .switch { position: relative; display: inline-block; width: 34px; height: 20px; }
        .switch input { opacity: 0; width: 0; height: 0; }
        .slider {
            position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0;
            background-color: #333; transition: .4s; border-radius: 34px;
        }
        .slider:before {
            position: absolute; content: ""; height: 14px; width: 14px; left: 3px; bottom: 3px;
            background-color: white; transition: .4s; border-radius: 50%;
        }
        input:checked + .slider { background-color: var(--accent); }
        input:checked + .slider:before { transform: translateX(14px); }

        /* MAIN STAGE */
        .main-stage {
            display: flex; flex-direction: column;
            padding: 30px;
            background: radial-gradient(circle at top right, rgba(112, 0, 255, 0.08), transparent);
        }

        .legal-paper { 
            background: #fff; color: #1e293b; 
            padding: 80px 100px; border-radius: 2px; 
            font-family: 'Times New Roman', Times, serif; font-size: 12pt; 
            box-shadow: 0 50px 120px rgba(0,0,0,0.6); 
            flex: 1; overflow-y: auto; text-align: justify;
            border-top: 15px solid #1e293b;
            line-height: 1.5;
            position: relative;
        }

        .paper-logo {
            display: block;
            margin: 0 auto 30px auto;
            max-width: 100px;
            height: auto;
        }

        .legal-paper h1 { text-align: center; font-size: 16pt; margin-bottom: 40px; text-transform: uppercase; font-weight: bold; }
        .legal-paper h2 { font-size: 13pt; margin-top: 30px; border-bottom: 1px solid #000; padding-bottom: 5px; font-weight: bold; }
        
        .sig-block { margin-top: 60px; display: grid; grid-template-columns: 1fr 1fr; gap: 40px; border-top: 1px dashed #ccc; padding-top: 30px; }
        .sig-line { border-top: 1px solid #000; margin-top: 40px; padding-top: 5px; font-size: 10pt; }

        .toolbar {
            margin-top: 25px;
            display: flex; justify-content: space-between; align-items: center;
            padding: 20px 35px; background: var(--glass); border-radius: 24px;
            backdrop-filter: blur(20px); border: 1px solid var(--border);
        }

        .btn {
            background: var(--accent); color: #000; border: none;
            padding: 14px 28px; border-radius: 30px; font-weight: 800;
            cursor: pointer; transition: 0.3s; font-size: 0.85rem;
            text-transform: uppercase;
        }
        .btn:hover { transform: translateY(-3px); box-shadow: 0 10px 30px rgba(0, 242, 255, 0.3); }
        .btn-ghost { background: transparent; border: 1px solid var(--border); color: #fff; margin-left: 10px; }
    </style>
</head>
<body>
    <canvas id="particlesCanvas"></canvas>
    <div class="app-grid">
        <div class="sidebar">
            <div class="logo-header">
                <img src="logo.png" class="logo-img" alt="Lady Legalz Logo" onerror="this.style.display='none'">
                <div>
                    <h2 style="margin:0; font-size: 0.95rem; font-weight: 900; color: white; line-height:1;">LADY LEGALZ</h2>
                    <div style="font-family:'Space Mono'; font-size: 0.55rem; color:var(--accent); margin-top:4px;">NEO INTELLIGENCE 2026</div>
                </div>
            </div>

            <div class="section-label">1. Legal Standard</div>
            <div id="contract-list">
                <div class="tree-item" onclick="loadTemplate('csa')">Cloud Service Agreement</div>
                <div class="tree-item" onclick="loadTemplate('nda')">Mutual Non-Disclosure</div>
            </div>

            <div class="section-label">2. Governing State</div>
            <select class="state-select" id="state-select" onchange="render()">
                <option value="Delaware">Delaware (Corporate Standard)</option>
                <option value="California">California</option>
                <option value="New York">New York</option>
                <option value="Texas">Texas</option>
            </select>

            <div class="section-label">3. Clause Vault (Optional)</div>
            <div id="vault">
                <div class="vault-item">Arbitration Clause <label class="switch"><input type="checkbox" id="v-arb" onchange="render()"><span class="slider"></span></label></div>
                <div class="vault-item">Non-Solicitation <label class="switch"><input type="checkbox" id="v-solic" onchange="render()"><span class="slider"></span></label></div>
                <div class="vault-item">Attorney Fees <label class="switch"><input type="checkbox" id="v-fees" onchange="render()"><span class="slider"></span></label></div>
            </div>

            <div class="section-label">4. Cover Page Data</div>
            <div id="variable-fields"></div>
        </div>

        <div class="main-stage">
            <div class="legal-paper" id="active-draft">
                <img src="logo.png" class="paper-logo" alt="Document Logo" onerror="this.style.display='none'">
                <h1>NEO INTELLIGENCE CORE</h1>
                <p style="text-align: center;">Select a legal library template to begin high-fidelity generation.</p>
            </div>
            <div class="toolbar">
                <div>
                    <button class="btn" onclick="exportPDF()">Export PDF</button>
                    <button class="btn btn-ghost" onclick="exportWord()">Export DOCX</button>
                </div>
                <div id="status" style="font-family:'Space Mono'; font-size: 0.65rem; color:var(--accent);">OS_SYNCED: 100%</div>
            </div>
        </div>
    </div>

    <script>
        // JS logic remains identical but looks for 'logo.png' in root
        const VAULT_CLAUSES = {
            arb: `<h2>ARBITRATION</h2><p>Any dispute, claim or controversy arising out of or relating to this Agreement shall be determined by confidential binding arbitration in the venue specified herein, administered by JAMS or AAA.</p>`,
            solic: `<h2>NON-SOLICITATION</h2><p>During the term of this Agreement and for one year thereafter, neither party shall solicit for employment any employee or contractor of the other party involved in the performance of this Agreement.</p>`,
            fees: `<h2>ATTORNEY FEES</h2><p>In the event of litigation or arbitration to enforce the terms of this Agreement, the prevailing party shall be entitled to recover its reasonable attorney's fees and costs.</p>`
        };

        const STATE_LOGIC = {
            "Delaware": { venue: "the state and federal courts of Delaware" },
            "California": { venue: "the state and federal courts in San Francisco, California" },
            "New York": { venue: "the state and federal courts in New York County, New York" },
            "Texas": { venue: "the state and federal courts in Travis County, Texas" }
        };

        const TEMPLATES = {
            csa: {
                title: "CLOUD SERVICE AGREEMENT",
                vars: ["Provider_Name", "Customer_Name", "Date"],
                content: `<h1>Cloud Service Agreement</h1><p>This Agreement is made on <b>[[Date]]</b> between <b>[[Provider_Name]]</b> and <b>[[Customer_Name]]</b>.</p><h2>1. Services</h2><p>Provider shall provide the digital services as described in the applicable Order Form.</p><h2>2. Intellectual Property</h2><p>Provider retains all right, title, and interest in and to the Services. Customer retains all rights to Customer Data.</p>`
            },
            nda: {
                title: "MUTUAL NON-DISCLOSURE AGREEMENT",
                vars: ["Party_A", "Party_B", "Purpose"],
                content: `<h1>Mutual Non-Disclosure Agreement</h1><p>This Agreement between <b>[[Party_A]]</b> and <b>[[Party_B]]</b> facilitates discussions regarding <b>[[Purpose]]</b>.</p><h2>1. Confidentiality</h2><p>Each party shall protect Confidential Information with at least the same degree of care as its own proprietary information.</p>`
            }
        };

        let activeKey = null;
        let userData = {};

        function loadTemplate(key) {
            activeKey = key;
            const varBox = document.getElementById('variable-fields');
            varBox.innerHTML = '';
            userData = {};
            TEMPLATES[key].vars.forEach(v => {
                const input = document.createElement('input');
                input.className = 'var-input';
                input.placeholder = v.split('_').join(' ');
                input.oninput = (e) => { userData[v] = e.target.value; render(); };
                varBox.appendChild(input);
            });
            render();
            document.getElementById('status').innerText = "ASSEMBLING_" + key.toUpperCase();
        }

        function render() {
            if (!activeKey) return;
            // Use local logo.png
            let text = `<img src="logo.png" class="paper-logo" onerror="this.style.display='none'">` + TEMPLATES[activeKey].content;
            const state = document.getElementById('state-select').value;
            
            TEMPLATES[activeKey].vars.forEach(v => {
                const val = userData[v] || `<span class="variable-highlight">[${v.split('_').join(' ')}]</span>`;
                text = text.split(`[[${v}]]`).join(val);
            });

            if(document.getElementById('v-arb').checked) text += VAULT_CLAUSES.arb;
            if(document.getElementById('v-solic').checked) text += VAULT_CLAUSES.solic;
            if(document.getElementById('v-fees').checked) text += VAULT_CLAUSES.fees;

            text += `<h2>GOVERNING LAW</h2><p>This Agreement is governed by the laws of the State of ${state}. Venue shall be ${STATE_LOGIC[state].venue}.</p>`;
            text += `<div class="sig-block"><div><b>FOR PROVIDER:</b><div class="sig-line">Name:</div><div class="sig-line">Title:</div><div class="sig-line">Date:</div></div><div><b>FOR CUSTOMER:</b><div class="sig-line">Name:</div><div class="sig-line">Title:</div><div class="sig-line">Date:</div></div></div>`;

            document.getElementById('active-draft').innerHTML = text;
        }

        function exportPDF() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            doc.setFont("times", "normal");
            doc.setFontSize(12);
            const text = document.getElementById('active-draft').innerText;
            doc.text(doc.splitTextToSize(text, 170), 20, 35);
            doc.save('LadyLegalz_Contract_2026.pdf');
        }

        function exportWord() {
            const { Document, Packer, Paragraph, TextRun, AlignmentType } = window.docx;
            const text = document.getElementById('active-draft').innerText;
            const doc = new Document({ sections: [{ children: text.split('\n').map(l => new Paragraph({ alignment: AlignmentType.JUSTIFY, children: [new TextRun({ text: l, font: "Times New Roman", size: 24 })] })) }] });
            Packer.toBlob(doc).then(blob => saveAs(blob, "LadyLegalz_Contract_2026.docx"));
        }

        const canvas = document.getElementById('particlesCanvas');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth; canvas.height = window.innerHeight;
        let particles = Array.from({length: 40}, () => ({ x: Math.random()*canvas.width, y: Math.random()*canvas.height, vx: Math.random()-0.5, vy: Math.random()-0.5 }));
        function animate() {
            ctx.clearRect(0,0,canvas.width,canvas.height); ctx.fillStyle = '#00f2ff';
            particles.forEach(p => { p.x+=p.vx; p.y+=p.vy; if(p.x<0||p.x>canvas.width)p.vx*=-1; if(p.y<0||p.y>canvas.height)p.vy*=-1; ctx.beginPath(); ctx.arc(p.x,p.y,1,0,Math.PI*2); ctx.fill(); });
            requestAnimationFrame(animate);
        }
        animate();
    </script>
</body>
</html>
