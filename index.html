<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LADY LEGALZ | CONTRACTGEN v3.8.0</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Share+Tech+Mono&family=Rajdhani:wght@300;500;700&display=swap" rel="stylesheet">
    <style>
        :root { 
            --obsidian: #020406; --cyan: #00f2ff; --gold: #c5a059;
            --green: #00ff9d; --red: #ff0055; --glass: rgba(15, 25, 35, 0.9);
            --border: rgba(0, 242, 255, 0.2);
        }
        * { box-sizing: border-box; transition: all 0.3s ease; }
        body, html { margin: 0; padding: 0; height: 100%; overflow: hidden; font-family: 'Rajdhani', sans-serif; background: var(--obsidian); color: #e0e6ed; }
        .hud-grid { display: grid; grid-template-columns: 360px 1fr 420px; height: 100vh; gap: 12px; padding: 15px; }
        .panel { background: var(--glass); backdrop-filter: blur(20px); border: 1px solid var(--border); border-radius: 8px; display: flex; flex-direction: column; overflow: hidden; }
        .panel-header { background: rgba(0, 242, 255, 0.08); padding: 15px; font-family: 'Orbitron'; font-size: 0.7rem; color: var(--cyan); border-bottom: 1px solid var(--border); display: flex; justify-content: space-between; }
        .section { padding: 15px; border-bottom: 1px solid rgba(255,255,255,0.05); }
        .label { font-size: 0.65rem; color: var(--gold); text-transform: uppercase; letter-spacing: 2px; margin-bottom: 8px; display: block; font-weight: 700; }
        select, textarea { background: rgba(0,0,0,0.5); border: 1px solid var(--border); color: #fff; padding: 12px; font-family: 'Share Tech Mono'; width: 100%; border-radius: 4px; }
        button { background: rgba(0, 242, 255, 0.05); border: 1px solid var(--cyan); color: var(--cyan); padding: 12px; border-radius: 4px; font-family: 'Orbitron'; font-size: 0.65rem; cursor: pointer; width: 100%; }
        button:hover { background: var(--cyan); color: #000; box-shadow: 0 0 15px var(--cyan); }
        #pdf-viewport { flex: 1; background: #000; margin: 10px; border-radius: 4px; overflow: hidden; }
        #pdf-frame { width: 100%; height: 100%; filter: invert(0.9) hue-rotate(180deg) brightness(0.8); }
        #terminal { height: 100px; background: rgba(0,0,0,0.8); font-family: 'Share Tech Mono'; font-size: 0.7rem; padding: 12px; color: var(--green); overflow-y: auto; }
        #timeline-hud { background: rgba(0,242,255,0.03); padding: 12px; border-radius: 4px; min-height: 50px; font-size: 0.75rem; color: var(--cyan); display: flex; flex-wrap: wrap; gap: 8px; border: 1px dashed var(--border); }
    </style>
</head>
<body>

<div class="hud-grid">
    <aside class="panel">
        <div class="panel-header">CONTRACTGEN DOC VAULT <span>v3.7.9</span></div>
        <div style="flex:1; overflow-y:auto;">
            <div class="section">
                <span class="label">CONTRACTGEN PROTOCOLS</span>
                <select onchange="mount(this.value)">
                    <option value="">-- SELECT A FORM --</option>
                    <option value="ProSe1_Civil_Complaint.pdf">Pro Se 1: Civil Complaint</option>
                    <option value="ProSe2_Injunction_Request.pdf">Pro Se 2: Injunction Request</option>
                    <option value="ProSe3_Defendants_Answer.pdf">Pro Se 3: Defendant's Answer</option>
                    <option value="ProSe7_Employment_Discrimination.pdf">Pro Se 7: Employment Discrimination</option>
                    <option value="ProSe14_Civil_Rights_Prisoner.pdf">Pro Se 14: Civil Rights (Prisoner)</option>
                    <option value="ProSe15_Civil_Rights_NonPrisoner.pdf">Pro Se 15: Civil Rights (Non-Prisoner)</option>
                    <option value="AO240_IFP_Fee_Waiver.pdf">AO 240: IFP Fee Waiver</option>
                    <option value="JS44_Civil_Cover_Sheet.pdf">JS 44: Civil Cover Sheet</option>
                    <option value="AO440_Summons.pdf">AO 440: Federal Summons</option>
                    <option value="Judicial_Misconduct_Complaint.pdf">Judicial Misconduct Form</option>
                </select>
            </div>
            <div class="section">
                <span class="label">CONTRACTGEN AGREEMENTS</span>
                <select onchange="mount(this.value)">
                    <option value="">-- SELECT A AGREEMENT --</option>
                    <option value="Attorney_Client_Retainer.pdf">Attorney-Client Retainer</option>
                    <option value="Non_Disclosure_Agreement.pdf">NDA (Mutual)</option>
                    <option value="Residential_Lease_Agreement.pdf">Residential Lease</option>
                    <option value="Commercial_Lease_Agreement.pdf">Commercial Lease</option>
                    <option value="Real_Estate_Purchase_Contract.pdf">Real Estate Purchase</option>
                    <option value="LLC_Operating_Agreement.pdf">LLC Operating Agreement</option>
                    <option value="General_Power_of_Attorney.pdf">General Power of Attorney</option>
                    <option value="Independent_Contractor_Agreement.pdf">Contractor Agreement</option>
                    <option value="Divorce_Settlement_Agreement.pdf">Divorce Settlement</option>
                    <option value="Software_Licensing_Agreement.pdf">SaaS License Agreement</option>
                </select>
            </div>
            <div class="section">
                <span class="label">CONTRACTGEN BETA PERSONA</span>
                <select id="persona">
                    <option value="litigator">SENIOR LITIGATOR</option>
                    <option value="sarcastic">NEO-INTELLIGENCE</option>
                    <option value="clerk">LADY LEGALZ BETA 4</option>
                </select>
            </div>
        </div>
    </aside>

    <main class="panel">
        <div class="panel-header">CONTRACGEN VIEWPORT // <span id="asset-name" style="color:var(--gold)">LADY LEGALZ IDLE</span></div>
        <div id="pdf-viewport">
            <object id="pdf-frame" data="" type="application/pdf">
                <div style="padding:100px; text-align:center; color:var(--gold);">[ SELECT ASSET TO DEPLOY ]</div>
            </object>
        </div>
        <div id="terminal"></div>
    </main>

    <aside class="panel">
        <div class="panel-header">CONTRACTGEN NEO ENGINE <span style="color:var(--green)">LINK_OK</span></div>
        <div style="flex:1; padding:15px; overflow-y:auto;">
            <span class="label">CHRONO-TIMELINE</span>
            <div id="timeline-hud">AWAITING SEQUENCE...</div>
            <hr style="border:0; border-top:1px solid var(--border); margin:15px 0;">
            <span class="label">CONGRACTGEN SCRATCHPAD</span>
            <textarea id="scratch" style="height:320px;" placeholder="PASTE TEXT HERE..." oninput="sync()"></textarea>
            <div style="display:grid; grid-template-columns:1fr 1fr; gap:10px; margin-top:10px;">
                <button onclick="runGrok()">LADY LEGALZ SCAN</button>
                <button onclick="redact()" style="border-color:var(--red); color:var(--red);">BLACKOUT</button>
            </div>
            <button onclick="exportMemo()" style="margin-top:10px; border-color:var(--gold); color:var(--gold);">CONTRACTGEN MEMO</button>
        </div>
    </aside>
</div>

<script>
    function log(m) {
        const t = document.getElementById('terminal');
        t.innerHTML = `[${new Date().toLocaleTimeString()}] >> ${m}<br>` + t.innerHTML;
    }
    function mount(f) {
        if(!f) return;
        document.getElementById('asset-name').innerText = f.toUpperCase();
        document.getElementById('pdf-frame').data = "pdfs/" + f;
        log(`Asset Mounted: ${f}`);
    }
    function sync() {
        const text = document.getElementById('scratch').value;
        const years = [...new Set(text.match(/\b(19|20)\d{2}\b/g))].sort();
        document.getElementById('timeline-hud').innerHTML = years.length ? 
            years.map(y => `<span>[${y}]</span>`).join(' â†’ ') : "AWAITING MARKERS...";
    }
    function redact() {
        const s = document.getElementById('scratch');
        const val = s.value.substring(s.selectionStart, s.selectionEnd);
        if(!val) return;
        s.setRangeText("[REDACTED]");
        log("Neural Redaction applied.");
    }
    async function runGrok() {
        const text = document.getElementById('scratch').value;
        if(!text) return log("ERROR: Scratchpad empty.");
        log("Querying Grok Matrix via Secure Vercel API...");
        try {
            const res = await fetch('/api/grok', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ prompt: text, persona: document.getElementById('persona').value })
            });
            const data = await res.json();
            const win = window.open('', '_blank');
            win.document.write(`<body style="background:#020406;color:#00f2ff;padding:40px;font-family:monospace;">${data.choices[0].message.content}</body>`);
            log("Analysis window deployed.");
        } catch(e) { log("CRITICAL: Check API key in Vercel."); }
    }
    function exportMemo() {
        const win = window.open('', '_blank');
        win.document.write(`<html><body style="padding:50px;font-family:serif;"><h1>MEMO</h1><hr>${document.getElementById('scratch').value}</body></html>`);
        log("Memo buffer exported.");
    }
</script>
</body>
</html>
